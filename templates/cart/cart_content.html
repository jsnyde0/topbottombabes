{% load static %}
{% load custom_filters %}
<div id="cart-content"
     class="cart-content w-full h-1/3 m-8 mx-auto border-2 rounded-2xl">
    <h1 class="text-3xl font-bold p-4">
        Cart (<span id="total-product">{{ cart.get_num_items }}</span> items)
    </h1>
    <div class="overflow-x-auto">
        <table class="table">
            <!-- head -->
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Subtotal</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- row 1 -->
                {% for item in cart.items.all %}
                    <c-cart-row :item="{{ item }}" />
                {% empty %}
                    <tr>
                        <td colspan="5" class="text-center">Your cart is empty</td>
                    </tr>
                {% endfor %}
            </tbody>
            <!-- foot -->
            <tfoot>
                <c-cart-summary num_items="{{ cart.get_num_items }}" total_price="{{ cart.get_total_price }}" />
            </tfoot>
        </table>
    </div>
</div>
<script>
    document.body.addEventListener('htmx:configRequest', function(evt) {
        console.log('HTMX request configured:', evt.detail);
    });
    
    document.body.addEventListener('htmx:beforeRequest', function(evt) {
        console.log('HTMX request about to be sent:', evt.detail);
    });
    
    // Debugging: Check if HTMX is loaded
    console.log('HTMX loaded:', typeof htmx !== 'undefined');
    
    // Debugging: Log when the script runs
    console.log('Cart content script loaded');
</script>
